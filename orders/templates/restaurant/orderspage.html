{% load static %}
{% load restaurant %}

<!DOCTYPE html>
<html lang="th">
<head>
    {% include '../metadata.html' %}
    <link rel="stylesheet" href="{% static 'restaurant/main.css' %}">
    <link rel="stylesheet" href="{% static 'restaurant/orderspage.css' %}">
    <title>Orders Page</title>
</head>
<body class="restaurant">
    {% include '../header.html' %}
    <main>
        <h2>คำสั่งซื้อที่ยังไม่เสร็จ</h2>
        <div class="orders">
            {% for order in orders %}
                <div class="order">
                    <div class="order-queue-no">{{ order.queue_number }}</div>
                    <ul class="order-content">
                        <li><strong>ไส้:</strong>
                            {% if order.fillings.all|length == 0 %}
                                -
                            {% else %}
                                {{ order.fillings.all|parse_fillings }}
                            {% endif %}
                        </li>
                        <li><strong>ไข่:</strong> {{ order.egg_amount.amount }} ฟอง</li>
                        <li>
                            {% if order.is_takeaway %}
                                <strong>ใส่กล่อง</strong>
                            {% endif %}
                        </li>
                    </ul>
                    <form action="{% url 'mark_order_as_done' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ order.pk }}">
                        <button type="submit">เสร็จสิ้น</button>
                    </form>
                </div>
            {% endfor %}
            {% if orders|length == 0 %}
                <p>ไม่มีคำสั่งซื้อล่าสุด</p>
            {% endif %}
        </div>
    </main>
    {% include '../footer.html' %}
</body>
</html>